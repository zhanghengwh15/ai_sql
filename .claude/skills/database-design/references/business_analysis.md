# 业务分析指南

## 概述

业务分析是数据库设计的第一步，需要从业务流程中提取出关键的业务实体、属性和关系。

## 识别业务实体

### 实体识别方法

1. **名词识别法**: 从业务描述中提取所有名词，筛选出核心业务对象
2. **用例分析法**: 分析用户操作流程，识别操作的对象
3. **数据流分析法**: 追踪数据在业务流程中的流转，识别数据载体

### 实体特征

- 具有独立存在的意义
- 有明确的业务含义
- 有可识别的属性
- 与其他实体存在关系

### 示例

**业务流程**: "用户注册后可以浏览商品，将商品加入购物车，然后下单购买"

**识别实体**:
- 用户 (User)
- 商品 (Product)
- 购物车 (Cart)
- 订单 (Order)

## 提取实体属性

### 属性识别原则

1. **描述性属性**: 描述实体特征的属性（如：姓名、价格、状态）
2. **标识性属性**: 唯一标识实体的属性（如：ID、编号）
3. **关联性属性**: 关联其他实体的属性（如：用户ID、订单ID）
4. **时间性属性**: 记录时间信息的属性（如：创建时间、更新时间）

### 属性分类

- **核心属性**: 实体必须具有的属性
- **可选属性**: 实体可能具有的属性
- **衍生属性**: 可以通过其他属性计算得出的属性（通常不存储）

### 示例

**用户实体属性**:
- 核心属性: ID、用户名、密码、邮箱
- 可选属性: 手机号、头像、昵称
- 衍生属性: 订单总数（可通过订单表统计）

## 理解业务规则

### 规则类型

1. **数据完整性规则**: 
   - 必填字段
   - 唯一性约束
   - 取值范围限制

2. **业务逻辑规则**:
   - 状态流转规则
   - 权限控制规则
   - 业务计算规则

3. **关联关系规则**:
   - 级联删除规则
   - 关联数量限制
   - 关联条件限制

### 规则提取方法

- 从业务需求文档中提取
- 从现有系统行为中分析
- 与业务人员沟通确认

## 识别数据流转

### 数据流转分析

追踪数据在业务流程中的变化：

1. **数据产生**: 数据在哪个环节产生
2. **数据修改**: 数据在哪些环节被修改
3. **数据查询**: 数据在哪些环节被查询
4. **数据归档**: 数据是否需要归档或删除

### 流转模式

- **创建-修改-查询**: 标准CRUD流程
- **状态流转**: 数据在不同状态间流转
- **数据聚合**: 多个数据源聚合生成新数据

## 常见业务场景分析

### 用户管理系统

**实体**: 用户、角色、权限、用户角色关联

**关系**:
- 用户 - 角色: 多对多
- 角色 - 权限: 多对多

### 电商系统

**实体**: 用户、商品、订单、订单项、购物车、分类、库存

**关系**:
- 用户 - 订单: 一对多
- 订单 - 订单项: 一对多
- 商品 - 订单项: 一对多
- 商品 - 分类: 多对多
- 用户 - 购物车: 一对多

### 内容管理系统

**实体**: 用户、文章、分类、标签、评论、附件

**关系**:
- 用户 - 文章: 一对多（作者）
- 文章 - 分类: 多对一
- 文章 - 标签: 多对多
- 文章 - 评论: 一对多

## 分析检查清单

- [ ] 是否识别了所有核心业务实体？
- [ ] 每个实体的属性是否完整？
- [ ] 实体之间的关系是否清晰？
- [ ] 业务规则是否都已考虑？
- [ ] 数据流转是否理解清楚？
- [ ] 是否有遗漏的业务场景？
